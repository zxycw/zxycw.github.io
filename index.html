<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>情緒點餐助手</title>
  <style>
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Microsoft JhengHei', Arial, sans-serif;
    }
    body {
      background-color: #ffffff;
      min-height: 100vh;
    }
    .section {
      display: none;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      text-align: center;
    }
    .section.active { display: flex; }
    .container {
      max-width: 800px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }
    .title { font-size: 2.5rem; font-weight: bold; margin-bottom: 30px; }
    .question, .message { font-size: 1.2rem; margin-bottom: 30px; }
    .options {
      display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-bottom: 30px;
    }
    .mood-button, .flavor-button, .preference-button {
      padding: 15px 30px; background-color: #f5f5f5; border-radius: 50px; font-size: 1.1rem;
      cursor: pointer; border: none; min-width: 150px;
    }
    .mood-button.selected, .flavor-button.selected, .preference-button.selected {
      background-color: #b0b0b0; font-weight: bold;
    }
    .navigation {
      display: flex; justify-content: space-between; gap: 20px; position: relative;
      width: 100%; max-width: 800px; margin: 0 auto; margin-top: 60px;
    }
    .nav-button { background-color: #f5f5f5; border: none; padding: 12px 24px; border-radius: 50px; font-size: 1rem; cursor: pointer; }
    .ok-button { background-color: #2c2b2b; border: none; padding: 12px 24px; border-radius: 50px; font-size: 1rem; cursor: pointer; color: white; }
    .nav-button:hover { background-color: #e0e0e0; }
    .ok-button:hover { background-color: #333232; }
    .notification {
      background-color: #ffebee; color: #c62828; padding: 10px 20px; border-radius: 5px; margin-bottom: 20px;
      text-align: center; display: none; animation: fadeIn 0.3s;
    }
    .food-card {
      width: 100%; max-width: 600px; margin: 30px auto; border-radius: 16px; overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); background-color: white;
    }
    .food-image { width: 100%; height: auto; display: block; }
    .food-info { background-color: #f8f8f8; padding: 20px; text-align: center; }
    .food-info h2 { font-size: 1.3rem; margin-bottom: 10px; font-weight: bold; }
    .food-info p { font-size: 1rem; color: #666; line-height: 1.6; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    /* ====== 一般點餐樣式（整合進同頁；避免覆蓋你的全域設定） ====== */
    :root{
      --bg:#f6f6f6; --panel:#ffffff; --ink:#111; --ink-2:#666; --line:#e7e7e7; --radius:16px;
    }
    /* 包在 #general 作用域底下，避免影響其他分頁 */
    #general .wrap{
      display:flex; gap:18px; max-width:1200px; margin:22px auto; padding:0 18px;
    }
    #general .sidenav{
      width:200px; background:var(--panel); border-radius:14px; border:1px solid var(--line);
      padding:10px; position:sticky; top:18px; height:fit-content;
    }
    #general .sidenav h2{ font-size:16px; margin:8px 10px 6px; color:#333; letter-spacing:.08em }
    #general .cat-btn{
      width:100%; text-align:left; border:0; background:transparent; padding:14px 12px; border-radius:10px;
      font-size:16px; cursor:pointer; color:#222;
    }
    #general .cat-btn:hover{ background:#f0f0f0 }
    #general .cat-btn.active{ background:#111; color:#fff }

    #general .grid{
      flex:1; display:grid; grid-template-columns:repeat(2,minmax(260px,1fr)); gap:18px;
    }
    @media (max-width:860px){ #general .sidenav{display:none} #general .grid{grid-template-columns:1fr} }

    #general .card{
      background:var(--panel); border:1px solid var(--line); border-radius:var(--radius);
      padding:12px; display:flex; flex-direction:column; gap:10px; box-shadow:0 2px 6px rgba(0,0,0,.03);
    }
    #general .thumb{ width:100%; aspect-ratio:16/9; border-radius:12px; object-fit:cover; background:#ddd }
    #general .title{ font-size:20px; font-weight:700; margin:2px 0 0 }
    #general .desc{ margin:0; color:var(--ink-2); font-size:14px }
    #general .row{ display:flex; align-items:center; justify-content:space-between; margin-top:6px }
    #general .price{ font-weight:800; letter-spacing:.02em }
    #general .qty{
      display:flex; align-items:center; gap:8px; background:#f3f3f3; border-radius:999px; padding:6px 10px;
    }
    #general .qty button{
      border:0; background:#e9e9e9; border-radius:8px; padding:2px 10px; cursor:pointer; font-size:18px;
    }
    #general .qty span{ min-width:20px; text-align:center; font-weight:700 }

    #general .cart{
      position:fixed; left:18px; right:18px; bottom:18px; background:var(--panel);
      border:1px solid var(--line); border-radius:14px; padding:12px 14px; display:flex; gap:12px;
      align-items:center; justify-content:space-between; box-shadow:0 6px 14px rgba(0,0,0,.08);
      max-width:1200px; margin:0 auto;
    }
    #general .cart .meta{ color:#333; font-weight:600 }
    #general .checkout{
      border:0; background:#111; color:#fff; border-radius:10px; padding:12px 18px; font-weight:800; cursor:pointer;
    }
  </style>
</head>
<body>
  
  <div class="section active" id="p1">
    <div class="container">
      <h1 class="title">情緒點餐助手</h1>
      <img src="image/robot.png" alt="robot" style="width: 100px; margin: 20px 0;">
      <p class="message">今天想吃點甚麼？<br>需要我幫你選擇一份適合你的餐點嗎！</p>
      <div class="options">
        
        <button class="mood-button" onclick="goTo('general')">一般點餐</button>
        <button class="mood-button" onclick="goTo('emo_choose')">情緒助手推薦</button>
      </div>
    </div>
  </div>

  
  <div class="section" id="emo_choose">
    <div class="container">
      <h1 class="title">心情點餐助手</h1>
      <p class="question">今天的心情如何呢？</p>
      <div class="notification" id="moodNotify">請先選擇一個心情喔！</div>
      <div class="options">
        <button class="mood-button" onclick="selectAndContinue(this, 'taste', 'mood')">很棒</button>
        <button class="mood-button" onclick="selectAndContinue(this, 'taste', 'mood')">煩躁</button>
        <button class="mood-button" onclick="selectAndContinue(this, 'taste', 'mood')">有點低落</button>
        <button class="mood-button" onclick="selectAndContinue(this, 'taste', 'mood')">壓力大</button>
      </div>
      <div class="navigation">
        <button class="nav-button" onclick="goTo('p1')">上一頁</button>
        <button class="nav-button" onclick="checkSelection('mood', 'moodNotify', 'taste')">繼續</button>
      </div>
    </div>
  </div>

  
  <div class="section" id="taste">
    <div class="container">
      <h1 class="title">心情點餐助手</h1>
      <p class="question">今天想吃什麼口味？</p>
      <div class="notification" id="tasteNotify">請先選擇一個口味喔！</div>
      <div class="options">
        <button class="flavor-button" onclick="selectAndContinue(this, 'flavor', 'taste')">清淡</button>
        <button class="flavor-button" onclick="selectAndContinue(this, 'flavor', 'taste')">中等</button>
        <button class="flavor-button" onclick="selectAndContinue(this, 'flavor', 'taste')">重口味</button>
      </div>
      <div class="navigation">
        <button class="nav-button" onclick="goTo('emo_choose')">上一頁</button>
        <button class="nav-button" onclick="checkSelection('taste', 'tasteNotify', 'flavor')">繼續</button>
      </div>
    </div>
  </div>

  
  <div class="section" id="flavor">
    <div class="container">
      <h1 class="title">心情點餐助手</h1>
      <p class="question">想吃偏鹹還是偏甜？</p>
      <div class="notification" id="flavorNotify">請先選擇一個偏好喔！</div>
      <div class="options">
        <button class="flavor-button" onclick="selectAndContinue(this, 'preferences', 'flavor')">偏鹹</button>
        <button class="flavor-button" onclick="selectAndContinue(this, 'preferences', 'flavor')">平衡</button>
        <button class="flavor-button" onclick="selectAndContinue(this, 'preferences', 'flavor')">偏甜</button>
      </div>
      <div class="navigation">
        <button class="nav-button" onclick="goTo('taste')">上一頁</button>
        <button class="nav-button" onclick="checkSelection('flavor', 'flavorNotify', 'preferences')">繼續</button>
      </div>
    </div>
  </div>

  
  <div class="section" id="preferences">
    <div class="container">
      <h1 class="title">心情點餐助手</h1>
      <p class="question">今日忌口（可複選）</p>
      <div class="notification" id="prefNotify">請至少選擇一項喔！</div>
      <div class="options">
        <button class="preference-button" onclick="togglePreference(this)">海鮮</button>
        <button class="preference-button" onclick="togglePreference(this)">不吃牛肉</button>
        <button class="preference-button" onclick="togglePreference(this)">不要蔥蒜</button>
        <button class="preference-button" onclick="togglePreference(this)">素食</button>
        <button class="preference-button" onclick="togglePreference(this)">不要辣</button>
      </div>
      <div class="navigation">
        <button class="nav-button" onclick="goTo('flavor')">上一頁</button>
        <button class="nav-button" onclick="checkPreferences()">繼續</button>
      </div>
    </div>
  </div>

 
  <div class="section" id="recommend">
    <div class="container">
      <h1 class="title">推薦餐點</h1>
      <p class="message">今天聽起來.....，為您推薦套餐A，飯後附有今日限定的甜點，可以期待一下喔!</p>
      <div class="food-card">
        <img src="image/beef.png" alt="套餐圖片" class="food-image">
        <div class="food-info">
          <h2>套餐A - 爐烤肋眼牛排佐紅酒醬</h2>
          <p>爐烤肋眼牛排佐紅酒醬，搭配香煎蘑菇、嫩煮蘆筍與金黃千層馬鈴薯，視覺與味覺兼具的經典排餐。飯後附有今日限定的水果甜點。</p>
        </div>
      </div>
      <div style="display: flex; justify-content: center; gap: 400px; margin-top: 30px;">
        <button class="nav-button" onclick="goTo('p1')">重新開始</button>
        <button class="ok-button">選擇此餐點</button>
      </div>
    </div>
  </div>


  <div class="section" id="general" style="background:#f6f6f6;">
    <div class="container" style="padding-top:20px;">
      <h1 class="title" style="margin-bottom:10px;">一般點餐</h1>
      <div class="wrap">
     
        <aside class="sidenav">
          <h2>分類</h2>
          <button class="cat-btn active" data-cat="set">定食套餐</button>
          <button class="cat-btn" data-cat="main">單點主餐</button>
          <button class="cat-btn" data-cat="salad">沙拉</button>
          <button class="cat-btn" data-cat="dessert">甜點</button>
          <button class="cat-btn" data-cat="drink">飲品</button>
          <button class="cat-btn" data-cat="soup">濃湯</button>
        </aside>

        <!-- 右側卡片 -->
        <main class="grid" id="grid"></main>
      </div>
    </div>


    <div class="cart" id="cart">
      <div class="meta">已選 <span id="count">0</span> 道，合計 <span id="total">NT$0</span></div>
      <button class="checkout">前往結帳</button>
    </div>
  </div>

  <script>

    let userChoices = {}; 
    let preferences = []; 

    function goTo(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
     
      const cart = document.getElementById('cart');
      if (cart) cart.style.display = (id === 'general') ? 'flex' : 'none';
    }

    function selectAndContinue(button, nextPage, key) {
      button.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
      button.classList.add('selected');
      userChoices[key] = button.textContent;
      const notice = document.getElementById(`${key}Notify`);
      if (notice) notice.style.display = 'none';
      goTo(nextPage);
    }

    function checkSelection(key, noticeId, nextPage) {
      if (!userChoices[key]) {
        document.getElementById(noticeId).style.display = 'block';
      } else {
        goTo(nextPage);
      }
    }

    function togglePreference(button) {
      button.classList.toggle('selected');
      const value = button.textContent;
      if (button.classList.contains('selected')) {
        preferences.push(value);
      } else {
        preferences = preferences.filter(item => item !== value);
      }
      document.getElementById('prefNotify').style.display = 'none';
    }

    function checkPreferences() {
      if (preferences.length === 0) {
        document.getElementById('prefNotify').style.display = 'block';
      } else {
        goTo('recommend');
      }
    }


    const MENU = [
      {
    "id": "a1",
    "name": "香煎鯛魚佐塔塔醬",
    "desc": "定食套餐：魚＋小菜＋湯＋飯",
    "price": 280,
    "cat": "set",
    "img": "https://i.ibb.co/ZRP89WRT/image.png"
  },
  {
    "id": "a2",
    "name": "檸檬香草烤鯖魚",
    "desc": "定食套餐：魚＋小菜＋湯＋飯",
    "price": 270,
    "cat": "set",
    "img": "https://i.ibb.co/s9pZmBCh/image.png"
  },
  {
    "id": "m1",
    "name": "南瓜奶油雞肉",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 240,
    "cat": "main",
    "img": "https://i.ibb.co/075Kk2J/image.png"
  },
  {
    "id": "m2",
    "name": "番茄雞腿排",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 260,
    "cat": "main",
    "img": "https://i.ibb.co/tMhFbZL3/image.png"
  },
  {
    "id": "m3",
    "name": "蒜香白酒雞胸",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 240,
    "cat": "main",
    "img": "https://i.ibb.co/4Rthy85x/image.png"
  },
  {
    "id": "m4",
    "name": "香料咖哩蔬菜（素）",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 230,
    "cat": "main",
    "img": "https://i.ibb.co/XrzjJ20H/73a2c05728162e8f.png"
  },
  {
    "id": "m5",
    "name": "奶油蘑菇（素）",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 230,
    "cat": "main",
    "img": "https://i.ibb.co/PswTc74g/379f3cbdd4375460.png"
  },
  {
    "id": "m6",
    "name": "香蒜鮪魚",
    "desc": "可選擇頓飯/義大利麵/鼻管麵",
    "price": 250,
    "cat": "main",
    "img": "https://i.ibb.co/ynWjBSPn/fa5a110e-3b32-4288-b1cf-2a0112915e02.png"
  },
  {
    "id": "s1",
    "name": "和風梅醋秋蔬沙拉",
    "desc": "單點 110｜套餐加價 +80",
    "price": 110,
    "cat": "salad",
    "img": "https://i.ibb.co/4nDHbfKJ/1dd81ada2853c006.png"
  },
  {
    "id": "s2",
    "name": "奶油香草南瓜溫沙拉",
    "desc": "單點 130｜套餐加價 +100",
    "price": 130,
    "cat": "salad",
    "img": "https://i.ibb.co/d0p35tWp/83255cfee7559222.png"
  },
  {
    "id": "d1",
    "name": "焦糖烤布雷",
    "desc": "單點 100｜套餐加價 +70",
    "price": 100,
    "cat": "dessert",
    "img": "https://i.ibb.co/tPWFx3VK/ea57d15500f922ec.png"
  },
  {
    "id": "d2",
    "name": "黑巧克力慕斯",
    "desc": "單點 110（無套餐加購）",
    "price": 110,
    "cat": "dessert",
    "img": "https://i.ibb.co/DPdwv5Hk/e3ba8cd9569a1c0c.png"
  },
  {
    "id": "d3",
    "name": "藍莓乳酪蛋糕",
    "desc": "單點 120（無套餐加購）",
    "price": 120,
    "cat": "dessert",
    "img": "https://i.ibb.co/qMStb6tQ/848c5261bc51cdfb.png"
  },
  {
    "id": "d4",
    "name": "檸檬塔",
    "desc": "單點 90｜套餐加價 +60",
    "price": 90,
    "cat": "dessert",
    "img": "https://i.ibb.co/FqcVnL4S/A73-A1-D4-A-71-C1-4052-994-E-0-D87503-A8-C47.png"
  },
  {
    "id": "d5",
    "name": "熱布朗尼佐香草冰淇淋",
    "desc": "單點 120｜套餐加價 +90",
    "price": 120,
    "cat": "dessert",
    "img": "https://i.ibb.co/5WXfX5jt/94355-BF1-28-B5-4-C75-A4-E4-8-FBA5-EC9-C136.png"
  },
  {
    "id": "d7",
    "name": "古早味紅茶",
    "desc": "單點 60｜套餐加價 +40",
    "price": 60,
    "cat": "drink",
    "img": "https://i.ibb.co/TMN4b1xd/67-F1100-F-0-FB0-4240-8709-2-D49-C7-E20-D37.png"
  },
  {
    "id": "d8",
    "name": "茉莉綠茶",
    "desc": "單點 60｜套餐加價 +40",
    "price": 60,
    "cat": "drink",
    "img": "https://i.ibb.co/FLQbF2zD/20-B8-B8-AF-4-FAF-4-C66-A044-C6-B329-B44-F8-E.png"
  },
  {
    "id": "d9",
    "name": "檸檬紅茶",
    "desc": "單點 70（無套餐加購）",
    "price": 70,
    "cat": "drink",
    "img": "https://i.ibb.co/chPjWsVv/962d00e6-1217-48af-bffe-f08148568a57.png"
  },
  {
    "id": "d10",
    "name": "冬瓜茶",
    "desc": "單點 70（無套餐加購）",
    "price": 70,
    "cat": "drink",
    "img": "https://i.ibb.co/XrtqgDVT/832fcd28-e3da-4c7d-8922-af43b714d0e8.png"
  },
  {
    "id": "d11",
    "name": "鮮奶茶",
    "desc": "單點 90（無套餐加購）",
    "price": 90,
    "cat": "drink",
    "img": "https://i.ibb.co/qY9FY4JV/58193516-62ca-45f6-8745-dc7caf40d030.png"
  },
  {
    "id": "d12",
    "name": "美式咖啡",
    "desc": "單點 80｜套餐加價 +60",
    "price": 80,
    "cat": "drink",
    "img": "https://i.ibb.co/qLnGPcsv/89829f34-300c-4215-b24f-cc5bc4fc79f6.png"
  },
  {
    "id": "d13",
    "name": "咖啡拿鐵",
    "desc": "單點 90｜套餐加價 +70",
    "price": 90,
    "cat": "drink",
    "img": "https://i.ibb.co/S4xctg2Z/855f1f7a-d21e-4eb0-910f-5f7fc92f8fdc.png"
  },
  {
    "id": "d14",
    "name": "百香果氣泡飲",
    "desc": "單點 90（無套餐加購）",
    "price": 90,
    "cat": "drink",
    "img": "https://i.ibb.co/S4xctg2Z/855f1f7a-d21e-4eb0-910f-5f7fc92f8fdc.png"
  },
  {
    "id": "d15",
    "name": "情緒特調",
    "desc": "單點 100｜套餐加價 +80",
    "price": 100,
    "cat": "drink",
    "img": "https://i.ibb.co/svrQH7Xh/d600ffed-b73b-4ee4-8452-f4801471f169.png"
  },
  {
    "id": "d16",
    "name": "南瓜濃湯",
    "desc": "單點 70｜套餐加價 +50",
    "price": 70,
    "cat": "soup",
    "img": "https://i.ibb.co/VcjcxZQN/39266d76-1907-4026-b3de-8ad6372d6a9b.png"
  },
  {
    "id": "d17",
    "name": "玉米濃湯",
    "desc": "單點 70｜套餐加價 +50",
    "price": 70,
    "cat": "soup",
    "img": "https://i.ibb.co/Z6rH3qwZ/ba9a8c81-24b3-4cf2-b65b-0e587d58327c.png"
  },
  {
    "id": "d18",
    "name": "蘑菇濃湯",
    "desc": "單點 70｜套餐加價 +50",
    "price": 70,
    "cat": "soup",
    "img": "https://i.ibb.co/7NrnNyNB/ff3b1c8f-8474-465a-93b7-561cb8c51a1c.png"
  },
    ];

    const grid = document.getElementById('grid');
    const state = { cart:{}, cat:'set' };

    function money(n){ return 'NT$' + n.toLocaleString('zh-TW'); }

    function render(){
      grid.innerHTML = '';
      MENU.filter(x => x.cat === state.cat).forEach(item=>{
        const qty = state.cart[item.id] || 0;
        grid.insertAdjacentHTML('beforeend', `
          <article class="card" data-id="${item.id}">
            <img class="thumb" src="${item.img}" alt="${item.name}">
            <h3 class="title">${item.name}</h3>
            <p class="desc">${item.desc}</p>
            <div class="row">
              <div class="price">${money(item.price)}</div>
              <div class="qty">
                <button class="minus">–</button>
                <span class="num">${qty}</span>
                <button class="plus">＋</button>
              </div>
            </div>
          </article>
        `);
      });
      bindCardEvents();
      updateCart();
    }

    function bindCardEvents(){
      grid.querySelectorAll('.card').forEach(card=>{
        const id = card.dataset.id;
        card.querySelector('.plus').onclick = ()=>{
          state.cart[id] = (state.cart[id]||0) + 1;
          card.querySelector('.num').textContent = state.cart[id];
          updateCart();
        };
        card.querySelector('.minus').onclick = ()=>{
          state.cart[id] = Math.max(0,(state.cart[id]||0) - 1);
          card.querySelector('.num').textContent = state.cart[id];
          updateCart();
        };
      });
    }

    function updateCart(){
      const countEl = document.getElementById('count');
      const totalEl = document.getElementById('total');
      let count = 0, total = 0;
      Object.entries(state.cart).forEach(([id,qty])=>{
        if(!qty) return;
        const item = MENU.find(x=>x.id===id);
        count += qty; total += qty * item.price;
      });
      if(countEl) countEl.textContent = count;
      if(totalEl) totalEl.textContent = money(total);
    }

    document.querySelectorAll('#general .cat-btn').forEach(btn=>{
      btn.onclick = ()=>{
        document.querySelectorAll('#general .cat-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        state.cat = btn.dataset.cat;
        render();
      };
    });


    render();

    const cartInit = document.getElementById('cart');
    if (cartInit) cartInit.style.display = 'none';
  </script>
</body>
</html>
